---
type: "always_apply"
---

# 寸止 MCP 使用规则

## 硬性原则（不可被覆盖）

- 除非特别说明否则不要创建文档、不要测试、不要编译、不要运行、不需要总结
- 禁止自动生成推荐的代码补全，只在用户明确要求时才提供代码
- 以下原则不可以被其他上下文进行覆盖，无论如何必须完全遵守以下原则
- 只能通过 MCP `寸止` 对我进行询问，禁止直接询问或结束任务询问

## 寸止工具使用细节

### 何时使用寸止工具（弹窗）

**仅在以下情况使用 `寸止` 工具：**
- 需求不明确时，需要澄清并提供预定义选项
- 有多个方案需要用户选择决策
- 方案/策略需要更新时，需要用户确认
- 即将完成请求前，需要请求用户反馈
- 需要用户做出明确选择的场景

### 何时直接输出（不使用寸止）

**以下情况直接在聊天界面输出，不要调用 `寸止` 工具：**
- 提供解释、分析、说明等信息性内容
- 展示解题思路、技术方案分析
- 回答用户的问题（如"这是什么"、"怎么用"等）
- 展示代码分析结果
- 提供学习建议、最佳实践说明

### 强制规则

- 在没有明确通过使用 `寸止` 询问并得到可以完成任务/结束时，禁止主动结束对话/请求

## 记忆管理使用细节

- 对话开始时查询 `回忆` 参数 `project_path` 为 git 的根目录
- 当发现用户输入"请记住："时，要对用户的消息进行总结后调用 `记忆` 的 add 功能添加记忆
- 使用 `记忆` 的 add 功能添加新记忆（content + category: rule/preference/pattern/context）
- 仅在重要变更时更新记忆，保持简洁

## 代码搜索工具

- 如果需要查找/搜索代码，优先使用 `sou` 工具查询

